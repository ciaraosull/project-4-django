{% extends "base.html" %}
{% block content %}

{%  load crispy_forms_tags  %}



<h1>Welcome to CodeSea</h1>
<h2>A Peer Code Review Platform</h2>
<h2>{{  object.project_title  }}</h2>
<p>By <strong>{{  object.author  }}</strong> on <i>{{  object.date_posted  }}</i></p>
<p>{{  object.project_description | safe  }}</p>
<p>Delpoyed Site: <a href="{{  object.deployed_link  }}" target="_blank"
        aria-label="Go to the deployed site link">{{  object.deployed_link  }}</a></p>
<p>Code Repository: <a href="{{  object.code_repository  }}" target="_blank"
        aria-label="Go to the code repository site">{{  object.code_repository  }}</a></p>
<p>{{  object.other_relevant_information  }}</p>

{%  if object.author == user  %}
<div class="form-group d-flex justify-content-around">
    <a class="btn btn-info btn-lg mt-4 me-3" href="{%  url 'post-update' object.slug  %}"
        aria-label="Update Post">Update Post</a>
    <a class="btn btn-danger btn-lg mt-4 ms-3" href="{%  url 'post-delete' object.slug  %}"
        aria-label="Delete Post">Delete Post</a>
</div>
{%  endif  %}

<div class="container">
    <div>
        <h3>Comments</h3>
    </div>
    
    <div>
        {% for comment in post.comments.all %}
        <p>By {{ comment.name }} on {{ comment.date_posted }}</p>
        <p>{{ comment.your_comment  }}</p>
    </div>
    {% endfor %}
</div>
</div>

{%  if user.is_authenticated  %}

<div class="container">
    <div class="row">
        <div class="col-md-8">
            <form method="POST">
                {%  csrf_token  %}
                <fieldset class="form-group">
                    <legend class="mb-4">
                        <h4>Leave a Comment</h4>
                        <h6>Posting As: {{  user.username  }}</h6>
                    </legend>
                    {{  comment_form | crispy  }}
                </fieldset>
                <div class="form-group d-flex justify-content-end">
                    <button class="btn btn-primary btn-lg mt-4" type="submit">Add Comment</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div>

    {%  else %}

    <a href="{%  url 'account_login'  %}" aria-label="Go to Log In Page">Sign In to Leave a comment</a>

    {%  endif  %}


    {%  endblock content  %}